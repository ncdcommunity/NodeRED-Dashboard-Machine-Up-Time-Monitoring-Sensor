[{"id":"b114f6def794f501","type":"subflow","name":"Machine Up Time","info":"","category":"NCD","in":[{"x":260,"y":900,"wires":[{"id":"c067a5ad4d08c822"}]}],"out":[],"env":[{"name":"Path","type":"str","value":"","ui":{"icon":"font-awesome/fa-folder-open-o","label":{"en-US":"Custom Path"},"type":"input","opts":{"types":["str"]}}}],"meta":{},"color":"#3FADB5","icon":"font-awesome/fa-clock-o","status":{"x":2040,"y":820,"wires":[{"id":"112ae855eb3f5e50","port":0},{"id":"60d4d7d0627153b6","port":0},{"id":"36cf840230201032","port":0}]}},{"id":"ea0cc73c7b75d39f","type":"ui-text","z":"b114f6def794f501","group":"1bb0a8d7b24e4983","order":1,"width":0,"height":0,"name":"Din Count Title","label":"Contact Closure Counter","format":"{{msg.payload}}","layout":"col-center","style":false,"font":"","fontSize":"23","color":"#ffffff","className":"muTitles","x":3340,"y":680,"wires":[]},{"id":"b7d36e6909bbea82","type":"ui-template","z":"b114f6def794f501","group":"1bb0a8d7b24e4983","page":"","ui":"","name":"Din Count Gauge","order":2,"width":"0","height":"0","head":"","format":"<template>\n    <v-progress-circular class=\"circular2\" bg-color=\"#383838\" model-value=\"20\" :size=\"270\" :width=\"10\" color=\"#ffce21\" v-model=\"value\">\n            <div class=\"icon\">\n                <v-icon size=\"smaller\" color=\"#ffce21\" icon=\"mdi-electric-switch\"></v-icon>\n            </div>\n            <div class=\"text-center\">\n                {{ msg.scale }}\n            </div>\n            <div class=\"unit\">\n                Unit\n            </div>\n    </v-progress-circular>\n</template>\n<style>\n.circular2{\n    font-size: 44px;\n    font-weight: bold !important;\n    top: -15px !important;\n    left: 5px !important;\n}\n.icon{\n    position: absolute;\n    top: 40px;\n    left: 43%;\n}\n.unit{\n    position: absolute;\n    top: 190px;\n    left: 40%;\n    font-size: 30px;\n}\n</style>","storeOutMessages":true,"passthru":false,"resendOnRefresh":true,"templateScope":"local","className":"","x":3330,"y":720,"wires":[[]]},{"id":"376dea17d1f94a25","type":"ui-text","z":"b114f6def794f501","group":"7935521a499cab0c","order":1,"width":0,"height":0,"name":"Din Uptime Title","label":"Contact Closure Uptime","format":"{{msg.payload}}","layout":"col-center","style":false,"font":"","fontSize":"23","color":"#ffffff","className":"muTitles","x":3340,"y":760,"wires":[]},{"id":"ef7f025d727a35ba","type":"ui-template","z":"b114f6def794f501","group":"7935521a499cab0c","page":"","ui":"","name":"Din Uptime Gauge","order":2,"width":"2","height":"1","head":"","format":"<template>\n    <v-progress-circular class=\"circular2\" bg-color=\"#383838\" model-value=\"20\" :size=\"270\" :width=\"10\" color=\"#ffce21\" v-model=\"value\">\n            <div class=\"icon\">\n                <v-icon size=\"smaller\" color=\"#ffce21\" icon=\"mdi-clock\"></v-icon>\n            </div>\n            <div class=\"text-center\">\n                {{ msg.scale }}\n            </div>\n            <div class=\"unit\">\n                Sec\n            </div>\n    </v-progress-circular>\n</template>","storeOutMessages":true,"passthru":false,"resendOnRefresh":true,"templateScope":"local","className":"","x":3330,"y":800,"wires":[[]]},{"id":"b5e9f7cfc99bbb2c","type":"ui-text","z":"b114f6def794f501","group":"612b4702209f7f9b","order":1,"width":0,"height":0,"name":"CT Count Title","label":"CT Input Counter","format":"{{msg.payload}}","layout":"col-center","style":false,"font":"","fontSize":"23","color":"#ffffff","className":"muTitles","x":3700,"y":680,"wires":[]},{"id":"d647aa4626a57ccd","type":"ui-template","z":"b114f6def794f501","group":"612b4702209f7f9b","page":"","ui":"","name":"CT Count Gauge","order":2,"width":"2","height":"1","head":"","format":"<template>\n    <v-progress-circular class=\"circular2\" bg-color=\"#383838\" model-value=\"20\" :size=\"270\" :width=\"10\" color=\"#ffce21\" v-model=\"value\">\n            <div class=\"icon\">\n                <v-icon size=\"smaller\" color=\"#ffce21\" icon=\"mdi mdi-sine-wave\"></v-icon>\n            </div>\n            <div class=\"text-center\">\n                {{ msg.scale }}\n            </div>\n            <div class=\"unit\">\n                Unit\n            </div>\n    </v-progress-circular>\n</template>","storeOutMessages":true,"passthru":false,"resendOnRefresh":true,"templateScope":"local","className":"","x":3690,"y":720,"wires":[[]]},{"id":"61c95fdfab75115b","type":"ui-text","z":"b114f6def794f501","group":"69450dd7185d07b0","order":1,"width":0,"height":0,"name":"CT Uptime Title","label":"CT Input Uptime","format":"{{msg.payload}}","layout":"col-center","style":false,"font":"","fontSize":"23","color":"#ffffff","className":"muTitles","x":3700,"y":760,"wires":[]},{"id":"d2908c3a92d98f8d","type":"ui-template","z":"b114f6def794f501","group":"69450dd7185d07b0","page":"","ui":"","name":"CT Uptime Gauge","order":2,"width":"2","height":"1","head":"","format":"<template>\n    <v-progress-circular class=\"circular2\" bg-color=\"#383838\" model-value=\"20\" :size=\"270\" :width=\"10\" color=\"#ffce21\" v-model=\"value\">\n            <div class=\"icon\">\n                <v-icon size=\"smaller\" color=\"#ffce21\" icon=\"mdi-clock\"></v-icon>\n            </div>\n            <div class=\"text-center\">\n                {{ msg.scale }}\n            </div>\n            <div class=\"unit\">\n                Sec\n            </div>\n    </v-progress-circular>\n</template>","storeOutMessages":true,"passthru":false,"resendOnRefresh":true,"templateScope":"local","className":"","x":3690,"y":800,"wires":[[]]},{"id":"c3fcb1d4445c85ad","type":"ui-text","z":"b114f6def794f501","group":"927112ceab8d7b91","order":1,"width":0,"height":0,"name":"Opto Counter Title","label":"Digital Input Counter","format":"{{msg.payload}}","layout":"col-center","style":false,"font":"","fontSize":"23","color":"#ffffff","className":"muTitles","x":4070,"y":680,"wires":[]},{"id":"7184a9a9e62cb0d6","type":"ui-template","z":"b114f6def794f501","group":"927112ceab8d7b91","page":"","ui":"","name":"Opto Counter Gauge","order":2,"width":"2","height":"1","head":"","format":"<template>\n    <v-progress-circular class=\"circular2\" bg-color=\"#383838\" model-value=\"20\" :size=\"270\" :width=\"10\" color=\"#ffce21\" v-model=\"value\">\n            <div class=\"icon\">\n                <v-icon size=\"smaller\" color=\"#ffce21\" icon=\"mdi mdi-square-wave\"></v-icon>\n            </div>\n            <div class=\"text-center\">\n                {{ msg.scale }}\n            </div>\n            <div class=\"unit\">\n                Unit\n            </div>\n    </v-progress-circular>\n</template>","storeOutMessages":true,"passthru":false,"resendOnRefresh":true,"templateScope":"local","className":"","x":4060,"y":720,"wires":[[]]},{"id":"8a97438cf7e195d4","type":"ui-text","z":"b114f6def794f501","group":"ac0edcc32b91853b","order":1,"width":0,"height":0,"name":"Opto Uptime Title","label":"Digital Input Uptime","format":"{{msg.payload}}","layout":"col-center","style":false,"font":"","fontSize":"23","color":"#ffffff","className":"muTitles","x":4070,"y":760,"wires":[]},{"id":"8f389574a666a423","type":"ui-template","z":"b114f6def794f501","group":"ac0edcc32b91853b","page":"","ui":"","name":"Opto Uptime Title","order":2,"width":"2","height":"1","head":"","format":"<template>\n    <v-progress-circular class=\"circular2\" bg-color=\"#383838\" model-value=\"20\" :size=\"270\" :width=\"10\" color=\"#ffce21\" v-model=\"value\">\n            <div class=\"icon\">\n                <v-icon size=\"smaller\" color=\"#ffce21\" icon=\"mdi-clock\"></v-icon>\n            </div>\n            <div class=\"text-center\">\n                {{ msg.scale }}\n            </div>\n            <div class=\"unit\">\n                Sec\n            </div>\n    </v-progress-circular>\n</template>","storeOutMessages":true,"passthru":false,"resendOnRefresh":true,"templateScope":"local","className":"","x":4070,"y":800,"wires":[[]]},{"id":"da7917a2639f1d62","type":"ui-text","z":"b114f6def794f501","group":"b094883c3470e641","order":1,"width":0,"height":0,"name":"Acc Count Text","label":"Accelerometer Counter","format":"{{msg.payload}}","layout":"col-center","style":false,"font":"","fontSize":"23","color":"#ffffff","className":"muTitles","x":3700,"y":860,"wires":[]},{"id":"c47349f963ad467b","type":"ui-template","z":"b114f6def794f501","group":"b094883c3470e641","page":"","ui":"","name":"Acc Count Gauge","order":2,"width":"2","height":"1","head":"","format":"<template>\n    <v-progress-circular class=\"circular2\" bg-color=\"#383838\" model-value=\"20\" :size=\"270\" :width=\"10\" color=\"#ffce21\" v-model=\"value\">\n            <div class=\"icon\">\n                <v-icon size=\"smaller\" color=\"#ffce21\" icon=\"mdi mdi-waveform\"></v-icon>\n            </div>\n            <div class=\"text-center\">\n                {{ msg.scale }}\n            </div>\n            <div class=\"unit\">\n                Unit\n            </div>\n    </v-progress-circular>\n</template>","storeOutMessages":true,"passthru":false,"resendOnRefresh":true,"templateScope":"local","className":"","x":3690,"y":900,"wires":[[]]},{"id":"dc6c6c51db6fc4b7","type":"ui-text","z":"b114f6def794f501","group":"4f78a3f5fd3517ba","order":1,"width":0,"height":0,"name":"Acc Uptime Text","label":"Accelerometer Uptime","format":"{{msg.payload}}","layout":"col-center","style":false,"font":"","fontSize":"23","color":"#ffffff","className":"muTitles","x":3700,"y":940,"wires":[]},{"id":"bdd6f3ae463ee6c7","type":"ui-template","z":"b114f6def794f501","group":"4f78a3f5fd3517ba","page":"","ui":"","name":"Acc Uptime Gauge","order":2,"width":"2","height":"1","head":"","format":"<template>\n    <v-progress-circular class=\"circular2\" bg-color=\"#383838\" model-value=\"20\" :size=\"270\" :width=\"10\" color=\"#ffce21\" v-model=\"value\">\n            <div class=\"icon\">\n                <v-icon size=\"smaller\" color=\"#ffce21\" icon=\"mdi-clock\"></v-icon>\n            </div>\n            <div class=\"text-center\">\n                {{ msg.scale }}\n            </div>\n            <div class=\"unit\">\n                Sec\n            </div>\n    </v-progress-circular>\n</template>","storeOutMessages":true,"passthru":false,"resendOnRefresh":true,"templateScope":"local","className":"","x":3690,"y":980,"wires":[[]]},{"id":"085c92fab19c2aa1","type":"ui-text","z":"b114f6def794f501","group":"8d7663bc2ac83323","order":1,"width":0,"height":0,"name":"Mag Count Title","label":"Magnetometer Counter","format":"{{msg.payload}}","layout":"col-center","style":false,"font":"","fontSize":"23","color":"#ffffff","className":"muTitles","x":3340,"y":860,"wires":[]},{"id":"4796ccc0a2cdd4e3","type":"ui-template","z":"b114f6def794f501","group":"8d7663bc2ac83323","page":"","ui":"","name":"Mag Count Gauge","order":2,"width":"2","height":"1","head":"","format":"<template>\n    <v-progress-circular class=\"circular2\" bg-color=\"#383838\" model-value=\"20\" :size=\"270\" :width=\"10\" color=\"#ffce21\" v-model=\"value\">\n            <div class=\"icon\">\n                <v-icon size=\"smaller\" color=\"#ffce21\" icon=\"mdi-access-point\"></v-icon>\n            </div>\n            <div class=\"text-center\">\n                {{ msg.scale }}\n            </div>\n            <div class=\"unit\">\n                Unit\n            </div>\n    </v-progress-circular>\n</template>","storeOutMessages":true,"passthru":false,"resendOnRefresh":true,"templateScope":"local","className":"","x":3330,"y":900,"wires":[[]]},{"id":"c699bfb599b252fe","type":"ui-text","z":"b114f6def794f501","group":"420ef61f161bf847","order":1,"width":0,"height":0,"name":"Mag Uptime Title","label":"Magnetometer Uptime","format":"{{msg.payload}}","layout":"col-center","style":false,"font":"","fontSize":"23","color":"#ffffff","className":"muTitles","x":3330,"y":940,"wires":[]},{"id":"1dc002892d0774d0","type":"ui-template","z":"b114f6def794f501","group":"420ef61f161bf847","page":"","ui":"","name":"Mag Uptime Gauge","order":2,"width":"2","height":"1","head":"","format":"<template>\n    <v-progress-circular class=\"circular2\" bg-color=\"#383838\" model-value=\"20\" :size=\"270\" :width=\"10\" color=\"#ffce21\" v-model=\"value\">\n            <div class=\"icon\">\n                <v-icon size=\"smaller\" color=\"#ffce21\" icon=\"mdi-clock\"></v-icon>\n            </div>\n            <div class=\"text-center\">\n                {{ msg.scale }}\n            </div>\n            <div class=\"unit\">\n                Sec\n            </div>\n    </v-progress-circular>\n</template>","storeOutMessages":true,"passthru":false,"resendOnRefresh":true,"templateScope":"local","className":"","x":3330,"y":980,"wires":[[]]},{"id":"909fcc5db494fbe5","type":"ui-text","z":"b114f6def794f501","group":"ca64c1716e308c15","order":1,"width":0,"height":0,"name":"Battery Level Text","label":"Battery Level","format":"{{msg.payload}}","layout":"col-center","style":false,"font":"","fontSize":"23","color":"#ffffff","wrapText":false,"className":"muTitles","x":4450,"y":680,"wires":[]},{"id":"ceac311dc28769bd","type":"ui-template","z":"b114f6def794f501","group":"ca64c1716e308c15","page":"","ui":"","name":"Battery Level Gauge","order":2,"width":"2","height":"1","head":"","format":"<template>\n    <v-progress-circular class=\"circular2\" bg-color=\"#383838\" model-value=\"20\" :size=\"270\" :width=\"10\" color=\"#ffce21\" v-model=\"value\">\n            <div class=\"icon\">\n                <v-icon size=\"smaller\" color=\"#ffce21\" icon=\"mdi-battery-charging-60\"></v-icon>\n            </div>\n            <div class=\"text-center\">\n                {{ msg.payload.toFixed(2)}}%\n            </div>\n    </v-progress-circular>\n</template>\n\n\n\n","storeOutMessages":true,"passthru":false,"resendOnRefresh":true,"templateScope":"local","className":"","x":4440,"y":720,"wires":[[]]},{"id":"8779352844c21cd4","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.sensor_data.accelerometer_counter","tot":"msg"},{"t":"set","p":"scale","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3515,"y":900,"wires":[["a92864e4f1c56b59"]],"l":false},{"id":"8d95d14c20dcfde6","type":"link in","z":"b114f6def794f501","name":"link in 185","links":["8ab9be215b42c94a","8396b7a198014e88","70c754b9c5fef131"],"x":3465,"y":900,"wires":[["8779352844c21cd4"]]},{"id":"a92864e4f1c56b59","type":"range","z":"b114f6def794f501","minin":"0","maxin":"4294967295","minout":"0","maxout":"100","action":"scale","round":true,"property":"payload","name":"","x":3565,"y":900,"wires":[["c47349f963ad467b"]],"l":false},{"id":"3f53bec01e378be6","type":"ui-text","z":"b114f6def794f501","group":"0bb05677ebab170d","order":1,"width":0,"height":0,"name":"Battery History Text","label":"Battery Level History","format":"{{msg.payload}}","layout":"row-center","style":false,"font":"","fontSize":"19","color":"#ffffff","wrapText":false,"className":"muTitleBattChart","x":4450,"y":760,"wires":[]},{"id":"e1d97f72ab7d63d0","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.sensor_data.accelerometer_uptime","tot":"msg"},{"t":"set","p":"scale","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3515,"y":980,"wires":[["4baf0fd684c7350d"]],"l":false},{"id":"3e7183eb94c286a7","type":"link in","z":"b114f6def794f501","name":"link in 186","links":["8ab9be215b42c94a","8396b7a198014e88","70c754b9c5fef131"],"x":3465,"y":980,"wires":[["e1d97f72ab7d63d0"]]},{"id":"4baf0fd684c7350d","type":"range","z":"b114f6def794f501","minin":"0","maxin":"4294967295","minout":"0","maxout":"100","action":"scale","round":true,"property":"payload","name":"","x":3565,"y":980,"wires":[["bdd6f3ae463ee6c7"]],"l":false},{"id":"3e64bd776a44b1d5","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.sensor_data.digital_input_counter","tot":"msg"},{"t":"set","p":"scale","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3155,"y":720,"wires":[["9820d815552e4b86"]],"l":false},{"id":"5eb7184ee9825688","type":"link in","z":"b114f6def794f501","name":"link in 187","links":["8ab9be215b42c94a","8396b7a198014e88","70c754b9c5fef131"],"x":3105,"y":720,"wires":[["3e64bd776a44b1d5"]]},{"id":"9820d815552e4b86","type":"range","z":"b114f6def794f501","minin":"0","maxin":"4294967295","minout":"0","maxout":"100","action":"scale","round":true,"property":"payload","name":"","x":3205,"y":720,"wires":[["b7d36e6909bbea82"]],"l":false},{"id":"156a166ddcce481e","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.sensor_data.digital_input_uptime","tot":"msg"},{"t":"set","p":"scale","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3155,"y":800,"wires":[["d41c4b4509dea7da"]],"l":false},{"id":"c0ddaa15dd0d8bd8","type":"link in","z":"b114f6def794f501","name":"link in 188","links":["8ab9be215b42c94a","8396b7a198014e88","70c754b9c5fef131"],"x":3105,"y":800,"wires":[["156a166ddcce481e"]]},{"id":"d41c4b4509dea7da","type":"range","z":"b114f6def794f501","minin":"0","maxin":"4294967295","minout":"0","maxout":"100","action":"scale","round":true,"property":"payload","name":"","x":3205,"y":800,"wires":[["ef7f025d727a35ba"]],"l":false},{"id":"4149edbf892cf403","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.sensor_data.magnetometer_counter","tot":"msg"},{"t":"set","p":"scale","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3155,"y":900,"wires":[["2399763faf20f773"]],"l":false},{"id":"d15e5e0f7cce64f9","type":"link in","z":"b114f6def794f501","name":"link in 189","links":["8ab9be215b42c94a","8396b7a198014e88","70c754b9c5fef131"],"x":3105,"y":900,"wires":[["4149edbf892cf403"]]},{"id":"2399763faf20f773","type":"range","z":"b114f6def794f501","minin":"0","maxin":"4294967295","minout":"0","maxout":"100","action":"scale","round":true,"property":"payload","name":"","x":3205,"y":900,"wires":[["4796ccc0a2cdd4e3"]],"l":false},{"id":"438afa26e005b3e7","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.sensor_data.magnetometer_uptime","tot":"msg"},{"t":"set","p":"scale","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3155,"y":980,"wires":[["346834fa3cb1e525"]],"l":false},{"id":"4aa280745098b924","type":"link in","z":"b114f6def794f501","name":"link in 190","links":["8ab9be215b42c94a","8396b7a198014e88","70c754b9c5fef131"],"x":3105,"y":980,"wires":[["438afa26e005b3e7"]]},{"id":"346834fa3cb1e525","type":"range","z":"b114f6def794f501","minin":"0","maxin":"4294967295","minout":"0","maxout":"100","action":"scale","round":true,"property":"payload","name":"65535","x":3205,"y":980,"wires":[["1dc002892d0774d0"]],"l":false},{"id":"2c900b90b4652e17","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.battery_percent","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"$number(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":4295,"y":740,"wires":[["ceac311dc28769bd"]],"l":false},{"id":"6ad7098f5eeee8e1","type":"link in","z":"b114f6def794f501","name":"link in 191","links":["8ab9be215b42c94a","6d19d44def865737"],"x":4215,"y":740,"wires":[["2c900b90b4652e17","6116b31c4de10d2e","b6b17eb2ef1f4cd3"]]},{"id":"9c0124de7da2909d","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.sensor_data.ct_input_counter","tot":"msg"},{"t":"set","p":"scale","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3515,"y":720,"wires":[["9f3e7c290fe11d3c"]],"l":false},{"id":"dce06ba808e505a6","type":"link in","z":"b114f6def794f501","name":"link in 192","links":["8ab9be215b42c94a","8396b7a198014e88","70c754b9c5fef131"],"x":3465,"y":720,"wires":[["9c0124de7da2909d"]]},{"id":"9f3e7c290fe11d3c","type":"range","z":"b114f6def794f501","minin":"0","maxin":"4294967295","minout":"0","maxout":"100","action":"scale","round":true,"property":"payload","name":"","x":3565,"y":720,"wires":[["d647aa4626a57ccd"]],"l":false},{"id":"1331d11ad3554ab2","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.sensor_data.ct_input_uptime","tot":"msg"},{"t":"set","p":"scale","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3515,"y":800,"wires":[["eff9a90b28489404"]],"l":false},{"id":"21b0f81468bb59ea","type":"link in","z":"b114f6def794f501","name":"link in 193","links":["8ab9be215b42c94a","8396b7a198014e88","70c754b9c5fef131"],"x":3465,"y":800,"wires":[["1331d11ad3554ab2"]]},{"id":"eff9a90b28489404","type":"range","z":"b114f6def794f501","minin":"0","maxin":"4294967295","minout":"0","maxout":"100","action":"scale","round":true,"property":"payload","name":"","x":3565,"y":800,"wires":[["d2908c3a92d98f8d"]],"l":false},{"id":"1878b2c1f86f61b9","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.sensor_data.opto_input_counter","tot":"msg"},{"t":"set","p":"scale","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3875,"y":720,"wires":[["193eba1f8c725b6e"]],"l":false},{"id":"3e5f61e286d952b4","type":"link in","z":"b114f6def794f501","name":"link in 194","links":["8ab9be215b42c94a","8396b7a198014e88","70c754b9c5fef131"],"x":3825,"y":720,"wires":[["1878b2c1f86f61b9"]]},{"id":"193eba1f8c725b6e","type":"range","z":"b114f6def794f501","minin":"0","maxin":"4294967295","minout":"0","maxout":"100","action":"scale","round":true,"property":"payload","name":"","x":3925,"y":720,"wires":[["7184a9a9e62cb0d6"]],"l":false},{"id":"1007e96b69613e0e","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.sensor_data.opto_input_uptime","tot":"msg"},{"t":"set","p":"scale","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3875,"y":800,"wires":[["9dd4c7f42539ea62"]],"l":false},{"id":"ad35cd93b958a52e","type":"link in","z":"b114f6def794f501","name":"link in 195","links":["8ab9be215b42c94a","8396b7a198014e88","70c754b9c5fef131"],"x":3825,"y":800,"wires":[["1007e96b69613e0e"]]},{"id":"9dd4c7f42539ea62","type":"range","z":"b114f6def794f501","minin":"0","maxin":"4294967295","minout":"0","maxout":"100","action":"scale","round":true,"property":"payload","name":"","x":3925,"y":800,"wires":[["8f389574a666a423"]],"l":false},{"id":"c067a5ad4d08c822","type":"switch","z":"b114f6def794f501","name":"filterSensorData","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"sensor_data","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":400,"y":900,"wires":[["eafdb1e517677e8a"]]},{"id":"0578347015d5d19d","type":"function","z":"b114f6def794f501","name":"muInspectFunction","func":"let toggle = context.get(\"toggle\") || 0;\nlet unit = {};\n\nif(!toggle) /* First time */\n{\n    flow.set(\"muInspect\", true);\n    unit = {\n        groups: \n        { \n            show: \n            [\n                \"ncd-uptime:muInspect1\",\n                \"ncd-uptime:muInspect2\",\n                \"ncd-uptime:muInspect3\"\n            ],\n            hide: \n            [\n                \"ncd-uptime:muDigitalInCount1\", \n                \"ncd-uptime:muDigitalInCount2\",\n                \"ncd-uptime:muDigitalInCount3\",\n                \"ncd-uptime:muDigitalInUptime1\",\n                \"ncd-uptime:muDigitalInUptime2\",\n                \"ncd-uptime:muDigitalInUptime3\",\n                \"ncd-uptime:muAccInCount\",\n                \"ncd-uptime:muAccInUptime\",\n                \"ncd-uptime:muMagInCount\",\n                \"ncd-uptime:muMagInUptime\",\n                \"ncd-uptime:muBattery\",\n                \"ncd-uptime:muBatteryChart\"\n            ],\n            disable:   \n            [\n                \"ncd-uptime:muSelectMac\",\n                \"ncd-uptime:muDownload\"\n            ]  \n        } \n    }\n    toggle++;\n}\nelse /* Second time */\n{\n    flow.set(\"muInspect\", false);\n    unit = {\n        groups: \n        { \n            hide: \n            [\n                \"ncd-uptime:muInspect1\",\n                \"ncd-uptime:muInspect2\",\n                \"ncd-uptime:muInspect3\"\n            ],\n            show: \n            [\n                \"ncd-uptime:muDigitalInCount1\",\n                \"ncd-uptime:muDigitalInCount2\",\n                \"ncd-uptime:muDigitalInCount3\",\n                \"ncd-uptime:muDigitalInUptime1\",\n                \"ncd-uptime:muDigitalInUptime2\",\n                \"ncd-uptime:muDigitalInUptime3\",\n                \"ncd-uptime:muAccInCount\",\n                \"ncd-uptime:muAccInUptime\",\n                \"ncd-uptime:muMagInCount\",\n                \"ncd-uptime:muMagInUptime\",\n                \"ncd-uptime:muBattery\",\n                \"ncd-uptime:muBatteryChart\"\n            ],\n            enable:\n            [\n                \"ncd-uptime:muSelectMac\",\n                \"ncd-uptime:muDownload\"\n            ]  \n        } \n    }\n    toggle = 0;\n}\ncontext.set(\"toggle\", toggle);\nmsg.payload = unit;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":3460,"y":420,"wires":[["18e4b79c06b86e2e"]]},{"id":"cb81bda2a1ee87b1","type":"ui-template","z":"b114f6def794f501","group":"","page":"e61db48f0cd3c057","ui":"","name":"muInspect","order":0,"width":"2","height":"1","head":"","format":"<template>\n    <v-btn class=\"muinspect\" @click=\"send({payload:true})\" color=\"white\" density=\"default\" append-icon=\"mdi-code-braces\"> Inspect </v-btn>\n</template>\n\n<style>\n.muinspect{\n    height: 10px !important;\n    border-radius: 15px !important;\n    top: -120px !important;\n    left: -155px !important;\n    width: 142px !important;\n    color: black !important;\n}\n</style>","storeOutMessages":true,"passthru":false,"resendOnRefresh":true,"templateScope":"widget:page","className":"","x":3260,"y":420,"wires":[["0578347015d5d19d"]]},{"id":"18e4b79c06b86e2e","type":"ui-control","z":"b114f6def794f501","name":"muUIControl","ui":"0b6fb8b6f62a3d11","events":"all","x":3650,"y":440,"wires":[[]]},{"id":"7c21521de34fb3e4","type":"ui-text","z":"b114f6def794f501","group":"9c44a231c2fa16ac","order":2,"width":"0","height":"0","name":"Node ID","label":"Node ID","format":"{{msg.payload}}","layout":"row-spread","style":true,"font":"","fontSize":16,"color":"#ffffff","className":"","x":3280,"y":1120,"wires":[]},{"id":"383cc53ff66ff763","type":"ui-text","z":"b114f6def794f501","group":"9c44a231c2fa16ac","order":3,"width":"0","height":"0","name":"Firmware version","label":"Firmware version:","format":"{{msg.payload}}","layout":"row-spread","style":true,"font":"","fontSize":16,"color":"#ffffff","className":"","x":3310,"y":1160,"wires":[]},{"id":"f87c4706c0e33169","type":"ui-text","z":"b114f6def794f501","group":"9c44a231c2fa16ac","order":4,"width":"0","height":"0","name":"Battery V","label":"Battery (V):","format":"{{msg.payload}}","layout":"row-spread","style":true,"font":"","fontSize":16,"color":"#ffffff","className":"","x":3280,"y":1200,"wires":[]},{"id":"abbec99fef214781","type":"ui-text","z":"b114f6def794f501","group":"9c44a231c2fa16ac","order":5,"width":"0","height":"0","name":"Battery Level","label":"Battery Level (%):","format":"{{msg.payload}}","layout":"row-spread","style":true,"font":"","fontSize":16,"color":"#ffffff","className":"","x":3290,"y":1240,"wires":[]},{"id":"8fa72939920333fa","type":"ui-text","z":"b114f6def794f501","group":"9c44a231c2fa16ac","order":6,"width":"0","height":"0","name":"Counter","label":"Counter:","format":"{{msg.payload}}","layout":"row-spread","style":true,"font":"","fontSize":16,"color":"#ffffff","className":"","x":3280,"y":1280,"wires":[]},{"id":"ee8f55a33d7d1aaf","type":"ui-text","z":"b114f6def794f501","group":"9c44a231c2fa16ac","order":7,"width":"0","height":"0","name":"Sensor type","label":"Sensor Type:","format":"{{msg.payload}}","layout":"row-spread","style":true,"font":"","fontSize":16,"color":"#ffffff","className":"","x":3290,"y":1320,"wires":[]},{"id":"2c8f36e4c1976348","type":"ui-text","z":"b114f6def794f501","group":"9c44a231c2fa16ac","order":8,"width":"0","height":"0","name":"Sensor Name","label":"Sensor Name:","format":"{{msg.payload}}","layout":"row-spread","style":true,"font":"","fontSize":16,"color":"#ffffff","className":"","x":3300,"y":1360,"wires":[]},{"id":"4ac341566c5769d1","type":"ui-text","z":"b114f6def794f501","group":"9c44a231c2fa16ac","order":9,"width":"0","height":"0","name":"Type","label":"Type:","format":"{{msg.payload}}","layout":"row-spread","style":true,"font":"","fontSize":16,"color":"#ffffff","className":"","x":3270,"y":1400,"wires":[]},{"id":"1d8f68959f134df1","type":"ui-text","z":"b114f6def794f501","group":"9c44a231c2fa16ac","order":10,"width":"0","height":"0","name":"Address","label":"Address","format":"{{msg.payload}}","layout":"row-spread","style":true,"font":"","fontSize":16,"color":"#ffffff","className":"","x":3280,"y":1440,"wires":[]},{"id":"627ad089f3dbcda9","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.nodeId","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3185,"y":1120,"wires":[["7c21521de34fb3e4"]],"l":false},{"id":"bc7813647d07b661","type":"link in","z":"b114f6def794f501","name":"link in 196","links":["cfe16d4168354f74","fbcb2ff0017f8384"],"x":3095,"y":1300,"wires":[["627ad089f3dbcda9","a0dd922f51bd1d1d","23fa79cdaccc0e77","d547e16e2800417b","1f91a51a4c347f26","941fb25cc48d1ec2","cc37368cd2a1fd1b","2118af5fccd28852","8123557d1679f76e","3df3f566dc1e515d"]]},{"id":"a0dd922f51bd1d1d","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.firmware","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3185,"y":1160,"wires":[["383cc53ff66ff763"]],"l":false},{"id":"23fa79cdaccc0e77","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.battery","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3185,"y":1200,"wires":[["f87c4706c0e33169"]],"l":false},{"id":"d547e16e2800417b","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.battery_percent","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3185,"y":1240,"wires":[["abbec99fef214781"]],"l":false},{"id":"1f91a51a4c347f26","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.counter","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3185,"y":1280,"wires":[["8fa72939920333fa"]],"l":false},{"id":"941fb25cc48d1ec2","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.sensor_type","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3185,"y":1320,"wires":[["ee8f55a33d7d1aaf"]],"l":false},{"id":"cc37368cd2a1fd1b","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.sensor_name","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3185,"y":1360,"wires":[["2c8f36e4c1976348"]],"l":false},{"id":"2118af5fccd28852","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.type","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3185,"y":1400,"wires":[["4ac341566c5769d1"]],"l":false},{"id":"8123557d1679f76e","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.addr","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3185,"y":1440,"wires":[["1d8f68959f134df1"]],"l":false},{"id":"f215ccbe47c689cb","type":"ui-text","z":"b114f6def794f501","group":"9c44a231c2fa16ac","order":11,"width":"0","height":"0","name":"Receive","label":"Received:","format":"{{msg.payload}}","layout":"row-spread","style":true,"font":"","fontSize":16,"color":"#ffffff","className":"","x":3280,"y":1480,"wires":[]},{"id":"3df3f566dc1e515d","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.received","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3185,"y":1480,"wires":[["f215ccbe47c689cb"]],"l":false},{"id":"fe60a91631398fb4","type":"ui-text","z":"b114f6def794f501","group":"3cb657c26765b6df","order":2,"width":"0","height":"0","name":"Digital Input Counter","label":"Digital Input Counter:","format":"{{msg.payload}}","layout":"row-spread","style":true,"font":"","fontSize":16,"color":"#ffffff","className":"","x":3680,"y":1160,"wires":[]},{"id":"32037dc45c6fc650","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.sensor_data.digital_input_counter","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3545,"y":1160,"wires":[["fe60a91631398fb4"]],"l":false},{"id":"c3058e06c9545bdb","type":"ui-text","z":"b114f6def794f501","group":"3cb657c26765b6df","order":3,"width":"0","height":"0","name":"Digital Input Uptime","label":"Digital Input Uptime:","format":"{{msg.payload}}","layout":"row-spread","style":true,"font":"","fontSize":16,"color":"#ffffff","className":"","x":3670,"y":1200,"wires":[]},{"id":"d5f338fc3ef5fccf","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.sensor_data.digital_input_uptime","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3545,"y":1200,"wires":[["c3058e06c9545bdb"]],"l":false},{"id":"066cd0dc9fd341c0","type":"ui-text","z":"b114f6def794f501","group":"3cb657c26765b6df","order":4,"width":"0","height":"0","name":"CT Input Counter","label":"CT Input Counter:","format":"{{msg.payload}}","layout":"row-spread","style":true,"font":"","fontSize":16,"color":"#ffffff","className":"","x":3670,"y":1240,"wires":[]},{"id":"fdfa3d4fd718d109","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.sensor_data.ct_input_counter","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3545,"y":1240,"wires":[["066cd0dc9fd341c0"]],"l":false},{"id":"8ed974fb85be3bce","type":"ui-text","z":"b114f6def794f501","group":"3cb657c26765b6df","order":5,"width":"0","height":"0","name":"CT Input Uptime","label":"CT Input Uptime:","format":"{{msg.payload}}","layout":"row-spread","style":true,"font":"","fontSize":16,"color":"#ffffff","className":"","x":3660,"y":1280,"wires":[]},{"id":"858a6ba378867332","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.sensor_data.ct_input_uptime","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3545,"y":1280,"wires":[["8ed974fb85be3bce"]],"l":false},{"id":"2f651708a88be547","type":"ui-text","z":"b114f6def794f501","group":"9c44a231c2fa16ac","order":1,"width":"0","height":"0","name":"DATA","label":"DATA","format":"{{msg.payload}}","layout":"col-center","style":true,"font":"Arial,Arial,Helvetica,sans-serif","fontSize":"20","color":"#ffffff","className":"","x":3270,"y":1080,"wires":[]},{"id":"d098081a57af8238","type":"ui-text","z":"b114f6def794f501","group":"3cb657c26765b6df","order":1,"width":"0","height":"0","name":"SENSOR DATA (payload)","label":"SENSOR DATA","format":"{{msg.payload}}","layout":"col-center","style":true,"font":"Arial,Arial,Helvetica,sans-serif","fontSize":"20","color":"#ffffff","className":"","x":3650,"y":1080,"wires":[]},{"id":"e0c24a1e003026f7","type":"link in","z":"b114f6def794f501","name":"link in 197","links":["cfe16d4168354f74","fbcb2ff0017f8384"],"x":3435,"y":1320,"wires":[["32037dc45c6fc650","d5f338fc3ef5fccf","fdfa3d4fd718d109","858a6ba378867332","17582cba35dd4c16","2e4e574d5326851b","67f6efda13f1df1d","92a068690ac2439d","adb0107412d10e02","d02e5cdd9341392e"]]},{"id":"288d530b5a77c130","type":"ui-text","z":"b114f6def794f501","group":"0d804301575ca5db","order":1,"width":"0","height":"0","name":"ORIGINAL","label":"ORIGINAL","format":"{{msg.payload}}","layout":"col-center","style":true,"font":"Arial,Arial,Helvetica,sans-serif","fontSize":"20","color":"#ffffff","className":"","x":4070,"y":1080,"wires":[]},{"id":"ed5f2f0feafd2066","type":"ui-text","z":"b114f6def794f501","group":"0d804301575ca5db","order":2,"width":"0","height":"0","name":"MAC","label":"MAC:","format":"{{msg.payload}}","layout":"row-spread","style":true,"font":"","fontSize":16,"color":"#ffffff","className":"","x":4050,"y":1120,"wires":[]},{"id":"f9d8479df489a266","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.original.mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3965,"y":1120,"wires":[["ed5f2f0feafd2066"]],"l":false},{"id":"521af1904c4a971c","type":"ui-text","z":"b114f6def794f501","group":"3cb657c26765b6df","order":6,"width":"0","height":"0","name":"Opto Input Counter","label":"Opto Input Counter:","format":"{{msg.payload}}","layout":"row-spread","style":true,"font":"","fontSize":16,"color":"#ffffff","className":"","x":3670,"y":1320,"wires":[]},{"id":"17582cba35dd4c16","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.sensor_data.opto_input_counter","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3545,"y":1320,"wires":[["521af1904c4a971c"]],"l":false},{"id":"a86be73e667518e6","type":"ui-text","z":"b114f6def794f501","group":"3cb657c26765b6df","order":7,"width":"0","height":"0","name":"Opto Input Uptime","label":"Opto Input Uptime:","format":"{{msg.payload}}","layout":"row-spread","style":true,"font":"","fontSize":16,"color":"#ffffff","className":"","x":3670,"y":1360,"wires":[]},{"id":"2e4e574d5326851b","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.sensor_data.opto_input_uptime","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3545,"y":1360,"wires":[["a86be73e667518e6"]],"l":false},{"id":"d3e7808170c6a9f0","type":"ui-text","z":"b114f6def794f501","group":"3cb657c26765b6df","order":8,"width":"0","height":"0","name":"Accelerometer Counter","label":"Accelerometer Counter:","format":"{{msg.payload}}","layout":"row-spread","style":true,"font":"","fontSize":16,"color":"#ffffff","className":"","x":3690,"y":1400,"wires":[]},{"id":"67f6efda13f1df1d","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.sensor_data.accelerometer_counter","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3545,"y":1400,"wires":[["d3e7808170c6a9f0"]],"l":false},{"id":"5ba3347fda636a0d","type":"ui-text","z":"b114f6def794f501","group":"3cb657c26765b6df","order":9,"width":"0","height":"0","name":"Accelerometer Uptime","label":"Accelerometer Uptime:","format":"{{msg.payload}}","layout":"row-spread","style":true,"font":"","fontSize":16,"color":"#ffffff","className":"","x":3680,"y":1440,"wires":[]},{"id":"92a068690ac2439d","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.sensor_data.accelerometer_uptime","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3545,"y":1440,"wires":[["5ba3347fda636a0d"]],"l":false},{"id":"091559c9295e9381","type":"ui-text","z":"b114f6def794f501","group":"0d804301575ca5db","order":3,"width":"0","height":"0","name":"RECEIVE OPTIONS","label":"RECEIVE OPTIONS","format":"{{msg.payload}}","layout":"col-center","style":true,"font":"Arial,Arial,Helvetica,sans-serif","fontSize":"20","color":"#ffffff","className":"","x":4100,"y":1160,"wires":[]},{"id":"c055faca580388ed","type":"ui-text","z":"b114f6def794f501","group":"0d804301575ca5db","order":4,"width":"0","height":"0","name":"ack","label":"ack:","format":"{{msg.payload}}","layout":"row-spread","style":true,"font":"","fontSize":16,"color":"#ffffff","className":"","x":4050,"y":1200,"wires":[]},{"id":"e5757327e0295b25","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.original.receive_options.ack","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3965,"y":1200,"wires":[["c055faca580388ed"]],"l":false},{"id":"e65a8e2116d9448c","type":"ui-text","z":"b114f6def794f501","group":"0d804301575ca5db","order":5,"width":"0","height":"0","name":"broadcast","label":"broadcast:","format":"{{msg.payload}}","layout":"row-spread","style":true,"font":"","fontSize":16,"color":"#ffffff","className":"","x":4060,"y":1240,"wires":[]},{"id":"223aefac8b278271","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.original.receive_options.broadcast","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3965,"y":1240,"wires":[["e65a8e2116d9448c"]],"l":false},{"id":"6dc7d8648a45aef3","type":"ui-text","z":"b114f6def794f501","group":"0d804301575ca5db","order":6,"width":"0","height":"0","name":"type","label":"type:","format":"{{msg.payload}}","layout":"row-spread","style":true,"font":"","fontSize":16,"color":"#ffffff","className":"","x":4050,"y":1280,"wires":[]},{"id":"ce839b153caef8b2","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.type","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3965,"y":1280,"wires":[["6dc7d8648a45aef3"]],"l":false},{"id":"5a7604cbac04f3bc","type":"ui-text","z":"b114f6def794f501","group":"0d804301575ca5db","order":7,"width":"0","height":"0","name":"modem mac","label":"modem mac:","format":"{{msg.payload}}","layout":"row-spread","style":true,"font":"","fontSize":16,"color":"#ffffff","className":"","x":4070,"y":1320,"wires":[]},{"id":"09dd9a0fd1398458","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.modem_mac","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3965,"y":1320,"wires":[["5a7604cbac04f3bc"]],"l":false},{"id":"20563a5fbd244c9d","type":"ui-text","z":"b114f6def794f501","group":"0d804301575ca5db","order":8,"width":"0","height":"0","name":"topic","label":"topic:","format":"{{msg.payload}}","layout":"row-spread","style":true,"font":"","fontSize":16,"color":"#ffffff","className":"","x":4050,"y":1360,"wires":[]},{"id":"0d966821bcbcd063","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"topic","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3965,"y":1360,"wires":[["20563a5fbd244c9d"]],"l":false},{"id":"2d9ec63f37450d66","type":"ui-text","z":"b114f6def794f501","group":"0d804301575ca5db","order":9,"width":"0","height":"0","name":"time","label":"time:","format":"{{msg.payload}}","layout":"row-spread","style":true,"font":"","fontSize":16,"color":"#ffffff","className":"","x":4050,"y":1400,"wires":[]},{"id":"ca4723b08e71d19e","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"time","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3965,"y":1400,"wires":[["2d9ec63f37450d66"]],"l":false},{"id":"a096e41a73efe1c6","type":"ui-text","z":"b114f6def794f501","group":"3cb657c26765b6df","order":10,"width":"0","height":"0","name":"Magnetometer Counter","label":"Magnetometer Counter:","format":"{{msg.payload}}","layout":"row-spread","style":true,"font":"","fontSize":16,"color":"#ffffff","className":"","x":3690,"y":1480,"wires":[]},{"id":"adb0107412d10e02","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.sensor_data.magnetometer_counter","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3545,"y":1480,"wires":[["a096e41a73efe1c6"]],"l":false},{"id":"0a28a90c9382657c","type":"ui-text","z":"b114f6def794f501","group":"3cb657c26765b6df","order":11,"width":"0","height":"0","name":"Magnetometer Uptime","label":"Magnetometer Uptime:","format":"{{msg.payload}}","layout":"row-spread","style":true,"font":"","fontSize":16,"color":"#ffffff","className":"","x":3680,"y":1520,"wires":[]},{"id":"d02e5cdd9341392e","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"data.sensor_data.magnetometer_uptime","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3545,"y":1520,"wires":[["0a28a90c9382657c"]],"l":false},{"id":"fd16b5a1783e8492","type":"ui-text","z":"b114f6def794f501","group":"0d804301575ca5db","order":11,"width":"0","height":"0","name":"last received message","label":"Last received message at:","format":"{{msg.payload}}","layout":"col-center","style":true,"font":"Arial,Arial,Helvetica,sans-serif","fontSize":"20","color":"#ffffff","className":"","x":4100,"y":1500,"wires":[]},{"id":"165d83f19aa338ee","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"$moment().format('MMMM Do YYYY, h:mm:ss a')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":3965,"y":1500,"wires":[["fd16b5a1783e8492"]],"l":false},{"id":"f5dc62b8c24d21e0","type":"ui-text","z":"b114f6def794f501","group":"0d804301575ca5db","order":10,"width":"0","height":"0","name":"relleno","label":"","format":"{{msg.payload}}","layout":"col-center","style":true,"font":"Impact,Impact,Charcoal,sans-serif","fontSize":"20","color":"#ffffff","className":"","x":4050,"y":1460,"wires":[]},{"id":"7e52305994188894","type":"link in","z":"b114f6def794f501","name":"link in 198","links":["cfe16d4168354f74","fbcb2ff0017f8384"],"x":3855,"y":1320,"wires":[["f9d8479df489a266","e5757327e0295b25","223aefac8b278271","ce839b153caef8b2","09dd9a0fd1398458","0d966821bcbcd063","ca4723b08e71d19e","165d83f19aa338ee"]]},{"id":"d491456070ed5139","type":"function","z":"b114f6def794f501","name":"muInitShow","func":"let unit = {\n    groups: \n    { \n        hide: \n        [\n            \"ncd-uptime:muInspect1\",\n            \"ncd-uptime:muInspect2\",\n            \"ncd-uptime:muInspect3\"\n        ],\n        show:\n        [\n            \"ncd-uptime:muDigitalInCount1\", \n            \"ncd-uptime:muDigitalInCount2\",\n            \"ncd-uptime:muDigitalInCount3\",\n            \"ncd-uptime:muDigitalInUptime1\",\n            \"ncd-uptime:muDigitalInUptime2\",\n            \"ncd-uptime:muDigitalInUptime3\",\n            \"ncd-uptime:muAccInCount\",\n            \"ncd-uptime:muAccInUptime\",\n            \"ncd-uptime:muMagInCount\",\n            \"ncd-uptime:muMagInUptime\",\n            \"ncd-uptime:muBattery\",\n            \"ncd-uptime:muBatteryChart\"\n        ],\n        enable:\n        [\n            \"ncd-uptime:muSelectMac\",\n            \"ncd-uptime:muDownload\"\n        ]  \n    } \n}\nmsg.payload = unit;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":3440,"y":460,"wires":[["18e4b79c06b86e2e"]]},{"id":"f25ca725b1c284ed","type":"ui-event","z":"b114f6def794f501","ui":"0b6fb8b6f62a3d11","name":"muEvent","x":3250,"y":460,"wires":[["d491456070ed5139"]]},{"id":"70c754b9c5fef131","type":"link out","z":"b114f6def794f501","name":"link out 129","mode":"link","links":["5eb7184ee9825688","8d95d14c20dcfde6","c0ddaa15dd0d8bd8","3e7183eb94c286a7","d15e5e0f7cce64f9","dce06ba808e505a6","21b0f81468bb59ea","4aa280745098b924","3e5f61e286d952b4","ad35cd93b958a52e"],"x":2765,"y":1060,"wires":[]},{"id":"8ab9be215b42c94a","type":"link out","z":"b114f6def794f501","name":"link out 130","mode":"link","links":["5eb7184ee9825688","8d95d14c20dcfde6","c0ddaa15dd0d8bd8","3e7183eb94c286a7","dce06ba808e505a6","d15e5e0f7cce64f9","21b0f81468bb59ea","4aa280745098b924","6ad7098f5eeee8e1","3e5f61e286d952b4","ad35cd93b958a52e"],"x":2705,"y":900,"wires":[]},{"id":"7571c87fe3b2a033","type":"link out","z":"b114f6def794f501","name":"toGraphs","mode":"link","links":["cc5f938261d33497"],"x":2905,"y":1140,"wires":[]},{"id":"58f502d1fbba380d","type":"file in","z":"b114f6def794f501","name":"path","filename":"filename","filenameType":"msg","format":"utf8","chunk":false,"sendError":false,"encoding":"none","allProps":false,"x":2275,"y":1100,"wires":[["90f31f21cff916f9"]],"l":false},{"id":"90f31f21cff916f9","type":"csv","z":"b114f6def794f501","name":"","sep":",","hdrin":"","hdrout":"none","multi":"mult","ret":"\\n","temp":"","skip":"0","strings":true,"include_empty_strings":"","include_null_values":"","x":2335,"y":1100,"wires":[["ea728fbdcb67aa7a"]],"l":false},{"id":"544277c22b04fc0f","type":"change","z":"b114f6def794f501","name":"Filter Data to save csv","rules":[{"t":"set","p":"addr","pt":"msg","to":"$substring(data.addr, 12)","tot":"jsonata"},{"t":"set","p":"addr","pt":"msg","to":"$replace(addr,\":\",\"-\")","tot":"jsonata"},{"t":"set","p":"date","pt":"msg","to":"$moment(data.received).format(\"YYYY-MM-DD\")","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1160,"y":920,"wires":[["a5656b64b6564c3c"]]},{"id":"1f3d37875bfa1111","type":"csv","z":"b114f6def794f501","name":"","sep":",","hdrin":false,"hdrout":"none","multi":"one","ret":"\\n","temp":"battery_percent,counter,sensor_data,sensor_name,addr,received","skip":"0","strings":true,"include_empty_strings":true,"include_null_values":true,"x":1815,"y":880,"wires":[["2d0291866b5af8c7"]],"l":false},{"id":"2d0291866b5af8c7","type":"file","z":"b114f6def794f501","name":"","filename":"filename","filenameType":"msg","appendNewline":true,"createDir":true,"overwriteFile":"false","encoding":"none","x":1865,"y":880,"wires":[["b62af91ee42e2c60","36cf840230201032"]],"l":false},{"id":"b62af91ee42e2c60","type":"function","z":"b114f6def794f501","name":"getAndSetMAC","func":"let newMAC = msg.data.addr;\nlet count = context.get(\"mucountMAC\") || 0;\n\nfor (let index = 0; index <= count; index++) {\n    let oldMAC = flow.get(\"muMAC[\"+index+\"]\"); // Acces to element 0 of array (MAC)\n    if(oldMAC == newMAC)\n    {\n        msg.mac_counter = count;\n        msg.newdevice = false;\n        return msg;\n    }\n}\n// if new MAC is arrive\nflow.set(\"muMAC[\"+count+\"]\", newMAC); // Save array [MAC, TYPE]\ncount++;\nmsg.mac_counter = count;\nmsg.newdevice = true; \ncontext.set(\"mucountMAC\", count);\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":2010,"y":900,"wires":[["01946b9a37a4607f","ba194651587cdb6c"]]},{"id":"01946b9a37a4607f","type":"function","z":"b114f6def794f501","name":"getMACOptionsForDropdown","func":"let count = msg.mac_counter;\nlet options = [];\nfor (let index = 0; index < count; index++) {\n    options[index] = flow.get(\"muMAC[\"+index+\"]\");\n}\nmsg.options = options;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":2250,"y":920,"wires":[["503e2555edc64bce","4689410198bb1516"]]},{"id":"76aeb9c5f4fb6b6f","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"addr","pt":"msg","to":"$substring(payload, 12)","tot":"jsonata"},{"t":"set","p":"addr","pt":"msg","to":"$replace(addr,\":\",\"-\")","tot":"jsonata"},{"t":"set","p":"date","pt":"msg","to":"","tot":"date"},{"t":"set","p":"date","pt":"msg","to":"$moment(date).format(\"YYYY-MM-DD\")","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1670,"y":1180,"wires":[["ba8b4a218da9aa72"]]},{"id":"503e2555edc64bce","type":"switch","z":"b114f6def794f501","name":"userMACSelection?","property":"data.addr","propertyType":"msg","rules":[{"t":"eq","v":"mumacSelection","vt":"flow"}],"checkall":"true","repair":false,"outputs":1,"x":2520,"y":920,"wires":[["52ea42287364d0a3"]]},{"id":"560c17973f223e3c","type":"change","z":"b114f6def794f501","name":"getData","rules":[{"t":"set","p":"payload.data","pt":"msg","to":"payload.col3","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2620,"y":1140,"wires":[["514b588c3e8c0baf"]]},{"id":"514b588c3e8c0baf","type":"json","z":"b114f6def794f501","name":"json object","property":"payload.data","action":"","pretty":false,"x":2715,"y":1140,"wires":[["66dee7cbd54f72fd"]],"l":false},{"id":"66dee7cbd54f72fd","type":"function","z":"b114f6def794f501","name":"getData","func":"let data = msg.payload.data;\ndata.Timestamp = msg.payload.col6;\ndata.battery = msg.payload.col1;\nmsg = {};\nmsg.payload = [data];\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":2810,"y":1140,"wires":[["7571c87fe3b2a033"]]},{"id":"a5656b64b6564c3c","type":"switch","z":"b114f6def794f501","name":"userPathValid?","property":"userPath","propertyType":"msg","rules":[{"t":"else"},{"t":"cont","v":"/","vt":"str"},{"t":"cont","v":"\\","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":1360,"y":920,"wires":[["60d4d7d0627153b6"],["33ab5f9d97271a4f"],["808901204c18242e"]],"outputLabels":["invalid","linuxFomat","winFormat"]},{"id":"33ab5f9d97271a4f","type":"function","z":"b114f6def794f501","name":"buildUserFilenameLinux/MAC","func":"let addr = msg.addr;\nlet date = msg.date;\nlet userPath = msg.userPath;\nlet sensor_data = msg.payload;\nmsg.filename = userPath + \"/\" + addr + \"/\" + date + \".csv\"\n//-------------\nmsg.payload = {};\nmsg.payload.sensor_data = sensor_data;\nmsg.payload.battery_percent = msg.data.battery_percent\nmsg.payload.counter = msg.data.counter;\nmsg.payload.sensor_name = msg.data.sensor_name;\nmsg.payload.addr = msg.data.addr;\nmsg.payload.received = msg.data.received;\n//-----------------\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1610,"y":920,"wires":[["1f3d37875bfa1111"]]},{"id":"808901204c18242e","type":"function","z":"b114f6def794f501","name":"buildUserFilenameWin","func":"let addr = msg.addr;\nlet date = msg.date;\nlet userPath = msg.userPath;\nlet sensor_data = msg.payload;\nmsg.filename = userPath + \"\\\\\" + addr + \"\\\\\" + date + \".csv\";\n//-------------\nmsg.payload = {};\nmsg.payload.sensor_data = sensor_data;\nmsg.payload.battery_percent = msg.data.battery_percent\nmsg.payload.counter = msg.data.counter;\nmsg.payload.sensor_name = msg.data.sensor_name;\nmsg.payload.addr = msg.data.addr;\nmsg.payload.received = msg.data.received;\n//-----------------\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1640,"y":960,"wires":[["1f3d37875bfa1111"]]},{"id":"ba8b4a218da9aa72","type":"switch","z":"b114f6def794f501","name":"win/lin?","property":"userPath","propertyType":"msg","rules":[{"t":"cont","v":"/","vt":"str"},{"t":"cont","v":"\\","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1850,"y":1180,"wires":[["ed21f99578ededeb"],["b41ede2eba64cccf"]]},{"id":"ed21f99578ededeb","type":"function","z":"b114f6def794f501","name":"Linux/MAC","func":"let addr = msg.addr;\nlet date = msg.date;\nlet userPath = msg.userPath;\nmsg.filename = userPath + \"/\" + addr + \"/\" + date + \".csv\"\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":2030,"y":1160,"wires":[["831c1543e9a9f96b"]]},{"id":"b41ede2eba64cccf","type":"function","z":"b114f6def794f501","name":"windows","func":"let addr = msg.addr;\nlet date = msg.date;\nlet userPath = msg.userPath;\nmsg.filename = userPath + \"\\\\\" + addr + \"\\\\\" + date + \".csv\";\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":2040,"y":1200,"wires":[["831c1543e9a9f96b"]]},{"id":"115b2826fc2e07cc","type":"catch","z":"b114f6def794f501","name":"","scope":["58f502d1fbba380d","2d0291866b5af8c7"],"uncaught":false,"x":1855,"y":800,"wires":[["60d4d7d0627153b6"]],"l":false},{"id":"60d4d7d0627153b6","type":"function","z":"b114f6def794f501","name":"function 58","func":"msg.payload = ({fill: \"red\",text:\"Path error\"});\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1945,"y":820,"wires":[[]],"l":false},{"id":"36cf840230201032","type":"function","z":"b114f6def794f501","name":"function 59","func":"msg.payload = ({fill: \"green\",text:\"Saving data\"});\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1945,"y":860,"wires":[[]],"l":false},{"id":"1577439278f6d237","type":"switch","z":"b114f6def794f501","name":"user/defalutPath?","property":"userPath","propertyType":"msg","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"false","repair":true,"outputs":2,"x":930,"y":880,"wires":[["0ceb9e5933c2e781"],["544277c22b04fc0f"]],"outputLabels":["defaultPath","userPath"]},{"id":"992c1f012dde59de","type":"change","z":"b114f6def794f501","name":"path Lin","rules":[{"t":"set","p":"userPath","pt":"msg","to":"HOME","tot":"env"}],"action":"","property":"","from":"","to":"","reg":false,"x":1140,"y":820,"wires":[["91e55994d0dbaaf2"]]},{"id":"3db8e66f10f68a51","type":"change","z":"b114f6def794f501","name":"path Win","rules":[{"t":"set","p":"userPath","pt":"msg","to":"HOMEPATH","tot":"env"}],"action":"","property":"","from":"","to":"","reg":false,"x":1140,"y":860,"wires":[["51cae53292f1283c"]]},{"id":"51cae53292f1283c","type":"switch","z":"b114f6def794f501","name":"Win","property":"userPath","propertyType":"msg","rules":[{"t":"neq","v":"","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1270,"y":860,"wires":[["7999902211e15e36"]]},{"id":"91e55994d0dbaaf2","type":"switch","z":"b114f6def794f501","name":"Lin","property":"userPath","propertyType":"msg","rules":[{"t":"neq","v":"","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1270,"y":820,"wires":[["6c616c64351838db"]]},{"id":"fa47cc8431c08067","type":"change","z":"b114f6def794f501","name":"getSavePath","rules":[{"t":"set","p":"userPath","pt":"msg","to":"Path","tot":"env"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":880,"wires":[["1577439278f6d237"]]},{"id":"6c616c64351838db","type":"change","z":"b114f6def794f501","name":"Filter Data to save csv","rules":[{"t":"set","p":"addr","pt":"msg","to":"$substring(data.addr, 12)","tot":"jsonata"},{"t":"set","p":"addr","pt":"msg","to":"$replace(addr,\":\",\"-\")","tot":"jsonata"},{"t":"set","p":"date","pt":"msg","to":"$moment(data.received).format(\"YYYY-MM-DD\")","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1440,"y":820,"wires":[["55c5248614e44a14"]]},{"id":"4124690cc98b739a","type":"function","z":"b114f6def794f501","name":"buldLocalPath","func":"let addr = msg.addr;\nlet date = msg.date;\nlet userPath = msg.userPath;\nlet sensor_data = msg.payload;\nmsg.filename = userPath + \"\\\\.node-red\\\\log\\\\\" + addr + \"\\\\\" + date + \".csv\";\n//-------------\nmsg.payload = {};\nmsg.payload.sensor_data = sensor_data;\nmsg.payload.battery_percent = msg.data.battery_percent\nmsg.payload.counter = msg.data.counter;\nmsg.payload.sensor_name = msg.data.sensor_name;\nmsg.payload.addr = msg.data.addr;\nmsg.payload.received = msg.data.received;\n//-----------------\nreturn msg;\n","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1640,"y":860,"wires":[["1f3d37875bfa1111"]]},{"id":"55c5248614e44a14","type":"function","z":"b114f6def794f501","name":"buldLocalPath","func":"let addr = msg.addr;\nlet date = msg.date;\nlet userPath = msg.userPath;\nlet sensor_data = msg.payload;\nmsg.filename = userPath + \"/.node-red/log/\" + addr + \"/\" + date + \".csv\"\n//-------------\nmsg.payload = {};\nmsg.payload.sensor_data = sensor_data;\nmsg.payload.battery_percent = msg.data.battery_percent\nmsg.payload.counter = msg.data.counter;\nmsg.payload.sensor_name = msg.data.sensor_name;\nmsg.payload.addr = msg.data.addr;\nmsg.payload.received = msg.data.received;\n//-----------------\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1640,"y":820,"wires":[["1f3d37875bfa1111"]]},{"id":"7999902211e15e36","type":"change","z":"b114f6def794f501","name":"Filter Data to save csv","rules":[{"t":"set","p":"addr","pt":"msg","to":"$substring(data.addr, 12)","tot":"jsonata"},{"t":"set","p":"addr","pt":"msg","to":"$replace(addr,\":\",\"-\")","tot":"jsonata"},{"t":"set","p":"date","pt":"msg","to":"$moment(data.received).format(\"YYYY-MM-DD\")","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1440,"y":860,"wires":[["4124690cc98b739a"]]},{"id":"5aed50f3ea12864d","type":"switch","z":"b114f6def794f501","name":"userPath?","property":"userPath","propertyType":"msg","rules":[{"t":"eq","v":"","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":1490,"y":1100,"wires":[["79432c8947bc7a66","f8d7366ec2eb42dd"],["76aeb9c5f4fb6b6f"]]},{"id":"12e7b22797852ed3","type":"change","z":"b114f6def794f501","name":"userPath&MacSelection","rules":[{"t":"set","p":"userPath","pt":"msg","to":"Path","tot":"env"},{"t":"set","p":"mumacSelection","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1290,"y":1100,"wires":[["5aed50f3ea12864d"]]},{"id":"f8d7366ec2eb42dd","type":"change","z":"b114f6def794f501","name":"path Lin","rules":[{"t":"set","p":"userPath","pt":"msg","to":"HOME","tot":"env"}],"action":"","property":"","from":"","to":"","reg":false,"x":1650,"y":1040,"wires":[["4cd283c90ac9bc92"]]},{"id":"79432c8947bc7a66","type":"change","z":"b114f6def794f501","name":"path Win","rules":[{"t":"set","p":"userPath","pt":"msg","to":"HOMEPATH","tot":"env"}],"action":"","property":"","from":"","to":"","reg":false,"x":1650,"y":1100,"wires":[["a5a4c73e32da251f"]]},{"id":"a5a4c73e32da251f","type":"switch","z":"b114f6def794f501","name":"","property":"userPath","propertyType":"msg","rules":[{"t":"neq","v":"","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1780,"y":1100,"wires":[["b710c82c8f905611"]]},{"id":"4cd283c90ac9bc92","type":"switch","z":"b114f6def794f501","name":"","property":"userPath","propertyType":"msg","rules":[{"t":"neq","v":"","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1780,"y":1040,"wires":[["1fd25f89614632f0"]]},{"id":"c5f97b0cd1b712f5","type":"function","z":"b114f6def794f501","name":"buildPathWin","func":"let addr = msg.addr;\nlet date = msg.date;\nlet userPath = msg.userPath;\nmsg.filename = userPath + \"\\\\.node-red\\\\log\\\\\" + addr + \"\\\\\" + date + \".csv\";\nreturn msg;\n","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":2140,"y":1100,"wires":[["58f502d1fbba380d"]]},{"id":"221ac056d30565cf","type":"function","z":"b114f6def794f501","name":"buildPathLin","func":"let addr = msg.addr;\nlet date = msg.date;\nlet userPath = msg.userPath;\nmsg.filename = userPath + \"/.node-red/log/\" + addr + \"/\" + date + \".csv\"\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":2140,"y":1040,"wires":[["58f502d1fbba380d"]]},{"id":"1fd25f89614632f0","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"addr","pt":"msg","to":"$substring(payload, 12)","tot":"jsonata"},{"t":"set","p":"addr","pt":"msg","to":"$replace(addr,\":\",\"-\")","tot":"jsonata"},{"t":"set","p":"date","pt":"msg","to":"","tot":"date"},{"t":"set","p":"date","pt":"msg","to":"$moment(date).format(\"YYYY-MM-DD\")","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1950,"y":1040,"wires":[["221ac056d30565cf"]]},{"id":"b710c82c8f905611","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"addr","pt":"msg","to":"$substring(payload, 12)","tot":"jsonata"},{"t":"set","p":"addr","pt":"msg","to":"$replace(addr,\":\",\"-\")","tot":"jsonata"},{"t":"set","p":"date","pt":"msg","to":"","tot":"date"},{"t":"set","p":"date","pt":"msg","to":"$moment(date).format(\"YYYY-MM-DD\")","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1950,"y":1100,"wires":[["c5f97b0cd1b712f5"]]},{"id":"ea728fbdcb67aa7a","type":"function","z":"b114f6def794f501","name":"last(n)Items","func":"const x = msg.payload.slice(-20);\nconst array = msg.payload;\n\nfor (let index = 0; index < 20; index++) {\n    msg.payload = x[index];\n    node.send([[null], [msg]]); \n}\nmsg.payload = array[array.length - 1];\nreturn [msg, null];\n","outputs":2,"timeout":"0","noerr":0,"initialize":"","finalize":"","libs":[],"x":2450,"y":1100,"wires":[["a934178de9e5b4b2","c7359a8024fdb501"],["560c17973f223e3c"]]},{"id":"bb63b49ba8805c2a","type":"catch","z":"b114f6def794f501","name":"","scope":["514b588c3e8c0baf"],"uncaught":false,"x":2570,"y":880,"wires":[[]]},{"id":"52ea42287364d0a3","type":"function","z":"b114f6def794f501","name":"function 60","func":"let inspect = flow.get(\"muInspect\") || false;\nlet data = msg.data.sensor_data;\ndata.Timestamp = msg.data.received;\ndata.battery = Number(msg.data.battery_percent);\nmsg.payload = [data];\nif(inspect){\n    return [msg, msg];\n}\nreturn [msg, null];\n\n","outputs":2,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":2655,"y":920,"wires":[["8ab9be215b42c94a"],["cfe16d4168354f74"]],"l":false},{"id":"a934178de9e5b4b2","type":"change","z":"b114f6def794f501","name":"getData","rules":[{"t":"set","p":"data.sensor_data","pt":"msg","to":"payload.col3","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2620,"y":1060,"wires":[["014803bddaab3b27"]]},{"id":"c7359a8024fdb501","type":"change","z":"b114f6def794f501","name":"getBattery","rules":[{"t":"set","p":"data.battery_percent","pt":"msg","to":"payload.col1","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2630,"y":1100,"wires":[["6d19d44def865737"]]},{"id":"014803bddaab3b27","type":"json","z":"b114f6def794f501","name":"json object","property":"data.sensor_data","action":"","pretty":false,"x":2715,"y":1060,"wires":[["70c754b9c5fef131"]],"l":false},{"id":"eafdb1e517677e8a","type":"switch","z":"b114f6def794f501","name":"filterByValidType","property":"data.sensor_type","propertyType":"msg","rules":[{"t":"eq","v":"108","vt":"num"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":580,"y":900,"wires":[["fa47cc8431c08067"],["f5e02c658e1dd43e"]]},{"id":"f5e02c658e1dd43e","type":"function","z":"b114f6def794f501","name":"typeErrorStatus","func":"msg.payload = ({fill: \"red\",text:\"Type error\"});\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":760,"y":920,"wires":[["96d1ca018c10e858"]]},{"id":"96d1ca018c10e858","type":"link out","z":"b114f6def794f501","name":"link out 131","mode":"link","links":["112ae855eb3f5e50"],"x":885,"y":920,"wires":[]},{"id":"112ae855eb3f5e50","type":"link in","z":"b114f6def794f501","name":"link in 199","links":["96d1ca018c10e858"],"x":1945,"y":780,"wires":[[]]},{"id":"33caf621b73e8ef3","type":"link in","z":"b114f6def794f501","name":"link in 200","links":[],"x":785,"y":1120,"wires":[["4689410198bb1516"]]},{"id":"ec26dc3658b7c733","type":"change","z":"b114f6def794f501","name":"clearInspect","rules":[{"t":"set","p":"data","pt":"msg","to":"{\"nodeId\":\"-\",\"firmware\":\"-\",\"battery\":\"-\",\"battery_percent\":\"-\",\"counter\":\"-\",\"sensor_type\":\"-\",\"sensor_data\":{},\"sensor_name\":\"-\",\"addr\":\"--:--:--:--:--:--:--:--\",\"received\":\"-\",\"original\":{\"mac\":\"--:--:--:--:--:--:--:--\",\"receive_options\":{\"ack\":\"-\",\"broadcast\":\"-\",\"type\":\"\"}},\"modem_mac\":\"--:--:--:--:--:--:--:--\"}","tot":"json"},{"t":"set","p":"topic","pt":"msg","to":"-","tot":"str"},{"t":"set","p":"lastReceived","pt":"msg","to":"false","tot":"bool"},{"t":"set","p":"time","pt":"msg","to":"-","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1195,"y":1140,"wires":[["fbcb2ff0017f8384"]],"l":false},{"id":"fbcb2ff0017f8384","type":"link out","z":"b114f6def794f501","name":"link out 132","mode":"link","links":["bc7813647d07b661","e0c24a1e003026f7","7e52305994188894","3ff3ad9ecb164071"],"x":1245,"y":1140,"wires":[]},{"id":"f69473a42f33a59a","type":"function","z":"b114f6def794f501","name":"inspectCheck","func":"let actualMAC = msg.payload;\nlet lastMAC = context.get(\"lastMAC\") || false;\n\nif (actualMAC != lastMAC)\n{\n    context.set(\"lastMAC\", actualMAC);\n    return msg;\n}\n\n\n\n\n","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1060,"y":1100,"wires":[["ec26dc3658b7c733","12e7b22797852ed3"]]},{"id":"6d19d44def865737","type":"link out","z":"b114f6def794f501","name":"link out 133","mode":"link","links":["6ad7098f5eeee8e1"],"x":2735,"y":1100,"wires":[]},{"id":"ac036e3cc62fa302","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"\"A new NCD device with MAC (\"&(data.addr)&\") has been connected! You can select it from MAC Dropdown\"","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":2185,"y":880,"wires":[["fea016b9eb4aeb13"]],"l":false},{"id":"4689410198bb1516","type":"ui-dropdown","z":"b114f6def794f501","group":"998d38a9a4198f35","name":"Select MAC","label":"MAC","tooltip":"","order":1,"width":"","height":"","passthru":false,"multiple":false,"options":[{"label":"Waiting for sensors...","value":"","type":"str"}],"payload":"","topic":"topic","topicType":"msg","className":"muselectMAC","x":890,"y":1100,"wires":[["f69473a42f33a59a","3b90fc3b7f977a1b"]]},{"id":"fea016b9eb4aeb13","type":"ui-notification","z":"b114f6def794f501","ui":"0b6fb8b6f62a3d11","position":"center center","colorDefault":true,"color":"#1a253f","displayTime":"5","showCountdown":true,"outputs":0,"allowDismiss":true,"dismissText":"Close","raw":false,"className":"","name":"NewDevice","x":2290,"y":880,"wires":[]},{"id":"ba194651587cdb6c","type":"switch","z":"b114f6def794f501","name":"","property":"newdevice","propertyType":"msg","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":2135,"y":880,"wires":[["ac036e3cc62fa302"]],"l":false},{"id":"cfe16d4168354f74","type":"link out","z":"b114f6def794f501","name":"link out 134","mode":"link","links":["bc7813647d07b661","e0c24a1e003026f7","7e52305994188894"],"x":2705,"y":940,"wires":[]},{"id":"3b90fc3b7f977a1b","type":"function","z":"b114f6def794f501","name":"function 61","func":"let count = msg.mac_counter;\nfor (let index = 0; index < count; index++) {\n    if(msg.payload == flow.get(\"muMAC[\"+index+\"]\"))\n    {\n        flow.set(\"muNumSelectedMAC\", index);\n        return msg\n    }\n}","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1050,"y":1140,"wires":[[]]},{"id":"7784afa0ad66c722","type":"inject","z":"b114f6def794f501","name":"","props":[],"repeat":"","crontab":"","once":true,"onceDelay":"1","topic":"","x":3245,"y":540,"wires":[["1f687a259347b51d"]],"l":false},{"id":"1f687a259347b51d","type":"change","z":"b114f6def794f501","name":"deleteFlowVar","rules":[{"t":"delete","p":"muMAC","pt":"flow"},{"t":"delete","p":"mumacSelection","pt":"flow"},{"t":"delete","p":"muDateDownloadFile","pt":"flow"},{"t":"delete","p":"muInspect","pt":"flow"},{"t":"set","p":"options","pt":"msg","to":"[\"\"]","tot":"json"},{"t":"set","p":"payload","pt":"msg","to":"[]","tot":"json"},{"t":"delete","p":"muNumSelectedMAC","pt":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":3295,"y":540,"wires":[["d491456070ed5139","8396b7a198014e88"]],"icon":"font-awesome/fa-remove","l":false},{"id":"8396b7a198014e88","type":"link out","z":"b114f6def794f501","name":"link out 136","mode":"link","links":["5eb7184ee9825688","8d95d14c20dcfde6","c0ddaa15dd0d8bd8","fbba1d9efb39cbf6","3e7183eb94c286a7","d15e5e0f7cce64f9","dce06ba808e505a6","21b0f81468bb59ea","4aa280745098b924","3e5f61e286d952b4","ad35cd93b958a52e"],"x":3365,"y":540,"wires":[]},{"id":"6116b31c4de10d2e","type":"ui-chart","z":"b114f6def794f501","group":"0bb05677ebab170d","name":"Battery History Chart","label":"","order":2,"chartType":"line","category":"topic","categoryType":"str","xAxisLabel":"","xAxisProperty":"Timestamp","xAxisPropertyType":"property","xAxisType":"time","xAxisFormat":"","xAxisFormatType":"auto","xmin":"","xmax":"","yAxisLabel":"","yAxisProperty":"battery","yAxisPropertyType":"property","ymin":"5","ymax":"100","bins":"","action":"append","stackSeries":false,"pointShape":"circle","pointRadius":"3","showLegend":false,"removeOlder":"10","removeOlderUnit":"60","removeOlderPoints":"20","colors":["#ffce21","#ffffff","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"textColor":["#666666"],"textColorDefault":true,"gridColor":["#e5e5e5"],"gridColorDefault":true,"width":"6","height":"5","className":"muBatteryChart","interpolation":"linear","x":4520,"y":800,"wires":[[]]},{"id":"da0db3eca238ab91","type":"range","z":"b114f6def794f501","minin":"0","maxin":"100","minout":"0","maxout":"100","action":"scale","round":true,"property":"payload","name":"","x":4295,"y":700,"wires":[["ceac311dc28769bd"]],"l":false},{"id":"fbba1d9efb39cbf6","type":"link in","z":"b114f6def794f501","name":"link in 201","links":["8396b7a198014e88"],"x":4215,"y":700,"wires":[["da0db3eca238ab91","6116b31c4de10d2e","b6b17eb2ef1f4cd3"]]},{"id":"cc5f938261d33497","type":"link in","z":"b114f6def794f501","name":"link in 202","links":["7571c87fe3b2a033"],"x":4265,"y":840,"wires":[["6116b31c4de10d2e","b6b17eb2ef1f4cd3"]]},{"id":"d90612d0b2a03310","type":"change","z":"b114f6def794f501","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"[]","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":4265,"y":800,"wires":[["6116b31c4de10d2e","b6b17eb2ef1f4cd3"]],"l":false},{"id":"3ff3ad9ecb164071","type":"link in","z":"b114f6def794f501","name":"link in 203","links":["fbcb2ff0017f8384"],"x":4215,"y":800,"wires":[["d90612d0b2a03310"]]},{"id":"eca77dee344897dc","type":"ui-template","z":"b114f6def794f501","g":"9ffe884d4e68d1a1","group":"","page":"e61db48f0cd3c057","ui":"","name":"muStyle","order":0,"width":0,"height":0,"head":"","format":".v-main {\n    background-image: url(\"\");\n    background-repeat: repeat;\n    --v-layout-top: 0px !important;\n    --v-layout-left: 181px !important;\n    background-color:#141316;\n}\n.bg-group-background{\n    border-width: 2.1px !important;\n    border-radius:  25px !important;\n    background-color: #1f2027 !important;\n    border-color: #1f2027 !important;\n}\n.v-toolbar{\n    left: 12px !important;\n    top: 119px !important;\n    width: 68px !important;\n    height: 62px !important;\n    border-radius: 15px;\n    background-color: rgb(5, 5, 5, 141) !important;\n}\n.v-navigation-drawer--left{\n    top: 186px !important;\n    height: 160px !important;\n    border-radius: 15px;\n    left: 12px !important;\n    width: 167px !important;\n    background-color: rgba(4, 4, 4, 0.653) !important;\n}\n.muGroupSelectMac {\n    top: 880px !important;\n    width: 165px !important;\n    left: 13px !important;\n    position: absolute !important;\n}\n.muGroupSelectMac .v-card {\n    height: 92px !important;\n}\n.muInspectGroup .v-card{\n    height: 1077px !important;\n}\n.muTitles\n{\n    top: -16px;\n    left: -18px;\n    position: relative;\n    width: 320px !important;\n    background-color: #454447;\n}\n.muTitles .nrdb-ui-text{\n    font-weight: bold !important;\n    font-size: 25px;\n    color: aliceblue;\n}\n.muTitleBattChart {\n    top: -20px;\n    left: -18px;\n    position: relative;\n    /* width: 1590px !important; */\n    font-weight: bold !important;\n    background-color: #454447;\n}\n.muTitleBattChart .nrdb-ui-text{\n    font-weight: bold !important;\n    font-size: 25px;\n    color: aliceblue;\n}\n.muBatteryChart{\n    position: relative;\n    top: -40px;\n    height: 310px;\n    width: 1250px;\n}\n.muGroupDownload{\n    height: 100px !important;\n    top: 710px;\n    position: absolute;\n    left: 13px;\n    width: 165px !important;\n}\n.muGroupDownload .v-card{\n    height: 155px !important;\n}\n.muDatePicker{\n    top: 12px;\n    left: -12px;\n    width: 155px;\n    position: relative;\n    color: white !important;\n}\n.muMainGroups .v-card {\n    height: 355px !important;\n}\n.muMainGroups {\n    width: 320px !important;\n}\n.muChartGroup .v-card{\n    height: 355px !important;\n}","storeOutMessages":true,"passthru":false,"resendOnRefresh":true,"templateScope":"page:style","className":"","x":4260,"y":80,"wires":[[]]},{"id":"feecca2007556df3","type":"ui-template","z":"b114f6def794f501","g":"9ffe884d4e68d1a1","group":"","page":"e61db48f0cd3c057","ui":"","name":"muLogo","order":0,"width":0,"height":0,"head":"","format":"<template>\n    <a href=\"https://ncd.io/\" target=\"_blank\">\n    <div class=\"mulogo2\">\n        <v-chip label size=\"x-large\" :width=\"144\" color=\"#ffce21\" text=\"ncd.io\"></v-chip>\n    </div>\n    </a>\n</template>\n<style>\n.mulogo2 {\n    transform: rotate(0deg);\n    width: 130px;\n    position: fixed;\n    top: 13px;\n    left: 12px;\n}\n.v-chip.v-chip--size-x-large {\n    --v-chip-height: 89px;\n    font-size: 2.125rem;\n    font-family: system-ui;\n}\n.v-chip--variant-tonal .v-chip__underlay {\n    border-radius: 15px !important;\n}\n</style>","storeOutMessages":true,"passthru":false,"resendOnRefresh":true,"templateScope":"widget:page","className":"","x":4120,"y":80,"wires":[[]]},{"id":"5c92d7e4b046d55c","type":"ui-template","z":"b114f6def794f501","g":"9ffe884d4e68d1a1","group":"","page":"e61db48f0cd3c057","ui":"","name":"muProductInfo","order":0,"width":"","height":"","head":"","format":"<template>\n    <a href=\"https://store.ncd.io/product/iot-long-range-wireless-machine-uptime-monitoring-sensor/\" target=\"_blank\">\n        <v-btn class=\"muInfo\" color=\"white\" density=\"default\" append-icon=\"mdi-open-in-new\"> Product info </v-btn>\n    </a>\n</template>\n<style>\n.muInfo{\n    height: 10px !important;\n    border-radius: 15px !important;\n    position: absolute;\n    top: 1049px;\n    left: 27px;\n    width: 142px;\n    color: black !important;\n}\n</style>","storeOutMessages":true,"passthru":false,"resendOnRefresh":true,"templateScope":"widget:page","className":"","x":3960,"y":80,"wires":[[]]},{"id":"bedf27fd3133b883","type":"ui-text-input","z":"b114f6def794f501","g":"96c38d684d24ac44","group":"35b1f94b25ae8e9f","name":"muDatePicker","label":"Date:","order":1,"width":"0","height":"0","topic":"topic","topicType":"msg","mode":"date","delay":300,"passthru":false,"sendOnDelay":false,"sendOnBlur":true,"sendOnEnter":true,"className":"muDatePicker","x":3280,"y":80,"wires":[["6649405e664074fb"]]},{"id":"8c66e9645a00bbf6","type":"ui-template","z":"b114f6def794f501","g":"96c38d684d24ac44","group":"35b1f94b25ae8e9f","page":"","ui":"","name":"muDownload","order":2,"width":"0","height":"0","head":"","format":"<template>  \n    <a href=\"/mu/log/ncd-machine-uptime.csv\">\n        <v-btn class=\"muButtonDownload\" color=\"white\">Download CSV</v-btn>\n    </a>\n</template>\n<style>\n.muButtonDownload{\n    height: 10px !important;\n    border-radius: 15px !important;\n    top:12px !important;\n    width: 127px !important;\n    color: black !important;\n}\n</style>\n","storeOutMessages":true,"passthru":false,"resendOnRefresh":true,"templateScope":"local","className":"","x":3730,"y":80,"wires":[[]]},{"id":"6649405e664074fb","type":"change","z":"b114f6def794f501","g":"96c38d684d24ac44","name":"","rules":[{"t":"set","p":"muDateDownloadFile","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3510,"y":80,"wires":[[]]},{"id":"090f91d872bd67ab","type":"function","z":"b114f6def794f501","g":"82ea80681b3d7347","name":"Set base path","func":"var basePath = msg.path;\nvar device = msg.device;\nvar filename = msg.date;\nmsg.filename = basePath + device + filename + \".csv\";\nreturn msg;\n\n\n","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":3920,"y":200,"wires":[["83c06c010114f1d1"]]},{"id":"fad6a4596824b8c1","type":"http response","z":"b114f6def794f501","g":"82ea80681b3d7347","name":"","statusCode":"","headers":{},"x":4270,"y":200,"wires":[]},{"id":"83c06c010114f1d1","type":"file in","z":"b114f6def794f501","g":"82ea80681b3d7347","name":"","filename":"filename","filenameType":"msg","format":"","chunk":false,"sendError":false,"encoding":"none","allProps":false,"x":4120,"y":200,"wires":[["fad6a4596824b8c1"]]},{"id":"bb9f1017cffd0cc0","type":"catch","z":"b114f6def794f501","g":"82ea80681b3d7347","name":"","scope":["83c06c010114f1d1"],"uncaught":false,"x":3710,"y":260,"wires":[["3f16b1cdde3ad9d0","4f43d9926d367f28","2548ad3cc1bebdaf"]]},{"id":"a2bf5287d4d00154","type":"http in","z":"b114f6def794f501","g":"82ea80681b3d7347","name":"muGet","url":"/mu/log/:fn","method":"get","upload":false,"swaggerDoc":"","x":3250,"y":200,"wires":[["f2223362426a6761","d33c0b3b144f0f15"]]},{"id":"99f7b02114a3d665","type":"change","z":"b114f6def794f501","g":"82ea80681b3d7347","name":"","rules":[{"t":"set","p":"date","pt":"msg","to":"muDateDownloadFile","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":3730,"y":200,"wires":[["090f91d872bd67ab"]]},{"id":"f2223362426a6761","type":"change","z":"b114f6def794f501","g":"82ea80681b3d7347","name":"","rules":[{"t":"set","p":"path","pt":"msg","to":"HOME","tot":"env"}],"action":"","property":"","from":"","to":"","reg":false,"x":3355,"y":180,"wires":[["fabe8ea0c09bf84f"]],"l":false},{"id":"d33c0b3b144f0f15","type":"change","z":"b114f6def794f501","g":"82ea80681b3d7347","name":"","rules":[{"t":"set","p":"path","pt":"msg","to":"HOMEPATH","tot":"env"}],"action":"","property":"","from":"","to":"","reg":false,"x":3355,"y":220,"wires":[["cfeb0bf07ffef2ca"]],"l":false},{"id":"fabe8ea0c09bf84f","type":"switch","z":"b114f6def794f501","g":"82ea80681b3d7347","name":"","property":"path","propertyType":"msg","rules":[{"t":"neq","v":"","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":3405,"y":180,"wires":[["2c99f2d0b4dca219"]],"l":false},{"id":"cfeb0bf07ffef2ca","type":"switch","z":"b114f6def794f501","g":"82ea80681b3d7347","name":"","property":"path","propertyType":"msg","rules":[{"t":"neq","v":"","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":3405,"y":220,"wires":[["7a3a65b0063d8b8a"]],"l":false},{"id":"2c99f2d0b4dca219","type":"change","z":"b114f6def794f501","g":"82ea80681b3d7347","name":"","rules":[{"t":"set","p":"path","pt":"msg","to":"(path)&\"/.node-red/log/\"","tot":"jsonata"},{"t":"set","p":"device","pt":"msg","to":"mumacSelection","tot":"flow"},{"t":"set","p":"device","pt":"msg","to":"$substring(device, 12)","tot":"jsonata"},{"t":"set","p":"device","pt":"msg","to":"$replace(device,\":\",\"-\")","tot":"jsonata"},{"t":"set","p":"device","pt":"msg","to":"(device)&\"/\"","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":3540,"y":180,"wires":[["99f7b02114a3d665"]]},{"id":"a082af291d38ec6f","type":"ui-notification","z":"b114f6def794f501","g":"82ea80681b3d7347","ui":"0b6fb8b6f62a3d11","position":"center center","colorDefault":true,"color":"#000000","displayTime":"15","showCountdown":true,"outputs":0,"allowDismiss":true,"dismissText":"Close","raw":false,"className":"","name":"","x":4230,"y":240,"wires":[]},{"id":"3f16b1cdde3ad9d0","type":"function","z":"b114f6def794f501","g":"82ea80681b3d7347","name":"error message","func":"var error = \"Error: no such file or directory\";\nmsg = {};\nmsg.payload = error;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":3880,"y":240,"wires":[["8b558b862b4177f4"]]},{"id":"8b558b862b4177f4","type":"trigger","z":"b114f6def794f501","g":"82ea80681b3d7347","name":"","op1":"","op2":"","op1type":"nul","op2type":"pay","duration":"500","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":3995,"y":240,"wires":[["a082af291d38ec6f"]],"l":false},{"id":"7a3a65b0063d8b8a","type":"change","z":"b114f6def794f501","g":"82ea80681b3d7347","name":"","rules":[{"t":"set","p":"path","pt":"msg","to":"(path)&\"\\\\.node-red\\\\log\\\\\"","tot":"jsonata"},{"t":"set","p":"device","pt":"msg","to":"mumacSelection","tot":"flow"},{"t":"set","p":"device","pt":"msg","to":"$substring(device,12)","tot":"jsonata"},{"t":"set","p":"device","pt":"msg","to":"$replace(device,\":\",\"-\")","tot":"jsonata"},{"t":"set","p":"device","pt":"msg","to":"(device)&\"\\\\\"","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":3540,"y":220,"wires":[["99f7b02114a3d665"]]},{"id":"4f43d9926d367f28","type":"http response","z":"b114f6def794f501","g":"82ea80681b3d7347","name":"muRedirecting","statusCode":"302","headers":{"location":"/dashboard/uptime"},"x":3880,"y":280,"wires":[]},{"id":"2548ad3cc1bebdaf","type":"trigger","z":"b114f6def794f501","g":"82ea80681b3d7347","name":"","op1":"","op2":"","op1type":"nul","op2type":"pay","duration":"1","extend":false,"overrideDelay":false,"units":"s","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":3815,"y":320,"wires":[["d78c2ad6c5b9220a"]],"l":false},{"id":"d78c2ad6c5b9220a","type":"link out","z":"b114f6def794f501","g":"82ea80681b3d7347","name":"link out 135","mode":"link","links":["34555e6a81dc4101"],"x":3865,"y":320,"wires":[]},{"id":"34555e6a81dc4101","type":"link in","z":"b114f6def794f501","name":"link in 204","links":["d78c2ad6c5b9220a"],"x":3295,"y":500,"wires":[["d491456070ed5139"]]},{"id":"b6b17eb2ef1f4cd3","type":"debug","z":"b114f6def794f501","name":"debug 6","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":4520,"y":900,"wires":[]},{"id":"831c1543e9a9f96b","type":"junction","z":"b114f6def794f501","x":2210,"y":1180,"wires":[["58f502d1fbba380d"]]},{"id":"0ceb9e5933c2e781","type":"junction","z":"b114f6def794f501","x":1060,"y":840,"wires":[["992c1f012dde59de","3db8e66f10f68a51"]]},{"id":"9ffe884d4e68d1a1","type":"group","z":"b114f6def794f501","name":"STYLE","style":{"stroke":"#999999","fill":"none","fill-opacity":"1","label":true,"color":"#a4a4a4"},"nodes":["eca77dee344897dc","feecca2007556df3","5c92d7e4b046d55c"],"x":3854,"y":39,"w":492,"h":82},{"id":"96c38d684d24ac44","type":"group","z":"b114f6def794f501","name":"","style":{"fill":"none","label":true},"nodes":["bedf27fd3133b883","8c66e9645a00bbf6","6649405e664074fb"],"x":3174,"y":39,"w":652,"h":82},{"id":"82ea80681b3d7347","type":"group","z":"b114f6def794f501","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["090f91d872bd67ab","fad6a4596824b8c1","83c06c010114f1d1","bb9f1017cffd0cc0","a2bf5287d4d00154","99f7b02114a3d665","f2223362426a6761","d33c0b3b144f0f15","fabe8ea0c09bf84f","cfeb0bf07ffef2ca","2c99f2d0b4dca219","a082af291d38ec6f","3f16b1cdde3ad9d0","8b558b862b4177f4","7a3a65b0063d8b8a","4f43d9926d367f28","2548ad3cc1bebdaf","d78c2ad6c5b9220a"],"x":3174,"y":139,"w":1172,"h":222},{"id":"1bb0a8d7b24e4983","type":"ui-group","name":"muDigitalInCount1","page":"e61db48f0cd3c057","width":"2","height":"1","order":3,"showTitle":false,"className":"muMainGroups","visible":"true","disabled":"false"},{"id":"7935521a499cab0c","type":"ui-group","name":"muDigitalInUptime1","page":"e61db48f0cd3c057","width":"2","height":"1","order":8,"showTitle":false,"className":"muMainGroups","visible":"true","disabled":"false"},{"id":"612b4702209f7f9b","type":"ui-group","name":"muDigitalInCount2","page":"e61db48f0cd3c057","width":"2","height":"1","order":4,"showTitle":false,"className":"muMainGroups","visible":"true","disabled":"false"},{"id":"69450dd7185d07b0","type":"ui-group","name":"muDigitalInUptime2","page":"e61db48f0cd3c057","width":"2","height":"1","order":9,"showTitle":false,"className":"muMainGroups","visible":"true","disabled":"false"},{"id":"927112ceab8d7b91","type":"ui-group","name":"muDigitalInCount3","page":"e61db48f0cd3c057","width":"2","height":"1","order":5,"showTitle":false,"className":"muMainGroups","visible":"true","disabled":"false"},{"id":"ac0edcc32b91853b","type":"ui-group","name":"muDigitalInUptime3","page":"e61db48f0cd3c057","width":"2","height":"1","order":10,"showTitle":false,"className":"muMainGroups","visible":"true","disabled":"false"},{"id":"b094883c3470e641","type":"ui-group","name":"muAccInCount","page":"e61db48f0cd3c057","width":"2","height":"1","order":6,"showTitle":false,"className":"muMainGroups","visible":"true","disabled":"false"},{"id":"4f78a3f5fd3517ba","type":"ui-group","name":"muAccInUptime","page":"e61db48f0cd3c057","width":"2","height":"1","order":11,"showTitle":false,"className":"muMainGroups","visible":"true","disabled":"false"},{"id":"8d7663bc2ac83323","type":"ui-group","name":"muMagInCount","page":"e61db48f0cd3c057","width":"4","height":"1","order":7,"showTitle":false,"className":"muMainGroups","visible":"true","disabled":"false"},{"id":"420ef61f161bf847","type":"ui-group","name":"muMagInUptime","page":"e61db48f0cd3c057","width":"4","height":"1","order":12,"showTitle":false,"className":"muMainGroups","visible":"true","disabled":"false"},{"id":"ca64c1716e308c15","type":"ui-group","name":"muBattery","page":"e61db48f0cd3c057","width":"2","height":"1","order":14,"showTitle":false,"className":"muMainGroups","visible":"true","disabled":"false"},{"id":"0bb05677ebab170d","type":"ui-group","name":"muBatteryChart","page":"e61db48f0cd3c057","width":"8","height":"1","order":13,"showTitle":false,"className":"muChartGroup","visible":"true","disabled":"false"},{"id":"e61db48f0cd3c057","type":"ui-page","name":"ncd-uptime","ui":"0b6fb8b6f62a3d11","path":"/uptime","icon":"update","layout":"grid","theme":"f62db58290689992","order":2,"className":"","visible":true,"disabled":false},{"id":"0b6fb8b6f62a3d11","type":"ui-base","name":"ncd-ui-base","path":"/dashboard","includeClientData":true,"acceptsClientConfig":["ui-notification","ui-control"],"showPathInSidebar":false,"navigationStyle":"temporary","titleBarStyle":"default"},{"id":"9c44a231c2fa16ac","type":"ui-group","name":"muInspect1","page":"e61db48f0cd3c057","width":"3","height":"1","order":15,"showTitle":false,"className":"muInspectGroup","visible":"true","disabled":"false"},{"id":"3cb657c26765b6df","type":"ui-group","name":"muInspect2","page":"e61db48f0cd3c057","width":"3","height":"1","order":16,"showTitle":false,"className":"muInspectGroup","visible":"true","disabled":"false"},{"id":"0d804301575ca5db","type":"ui-group","name":"muInspect3","page":"e61db48f0cd3c057","width":"3","height":"1","order":17,"showTitle":false,"className":"muInspectGroup","visible":"true","disabled":"false"},{"id":"998d38a9a4198f35","type":"ui-group","name":"muSelectMac","page":"e61db48f0cd3c057","width":"6","height":"1","order":1,"showTitle":false,"className":"muGroupSelectMac","visible":"true","disabled":"false"},{"id":"35b1f94b25ae8e9f","type":"ui-group","name":"muDownload","page":"e61db48f0cd3c057","width":"6","height":"1","order":2,"showTitle":false,"className":"muGroupDownload","visible":"true","disabled":"false"},{"id":"f62db58290689992","type":"ui-theme","name":"ncdTheme","colors":{"surface":"#0099cc","primary":"#0931fb","bgPage":"#000000","groupBg":"#191a1a","groupOutline":"#313030"},"sizes":{"pagePadding":"12px","groupGap":"6px","groupBorderRadius":"8px","widgetGap":"10px"}},{"id":"e1228675b0aa3ec6","type":"subflow:b114f6def794f501","z":"07b5e0dc39f6f1cc","name":"","x":810,"y":340,"wires":[]}]
